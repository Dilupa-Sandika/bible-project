---
// 1. Layout එක import කරනවා
import BaseLayout from '../../layouts/BaseLayout.astro';
import kjvBible from '../../data/en_kjv.json';

export async function getStaticPaths() {
  const paths = kjvBible.map(book => {
    return { params: { book: book.abbrev } };
  });
  return paths;
}

const { book: bookAbbrev } = Astro.params;
const currentBook = kjvBible.find(b => b.abbrev === bookAbbrev);
const chapters = currentBook.chapters;

// 2. Page Title එක Layout එකට pass කරනවා
const title = `${currentBook.name} - Chapters`;
---
<BaseLayout title={title}>
    
    <div class="mb-4 text-sm text-gray-600 dark:text-gray-400">
        <a href="/" class="text-blue-600 dark:text-blue-400 hover:underline">Home</a>
        <span class="mx-2">&gt;</span>
        <span class="font-semibold">{currentBook.name}</span>
    </div>

    <h1 class="text-3xl font-bold text-gray-800 dark:text-gray-100 mb-6">{currentBook.name}</h1>
    <h2 class="text-2xl font-semibold text-gray-700 dark:text-gray-200 mb-4">Select a Chapter</h2>
    
    <ul class="grid grid-cols-[repeat(auto-fill,minmax(60px,1fr))] gap-3">
        {chapters.map((chapter, index) => {
            const chapterNumber = index + 1;
            const chapterUrl = `/en/${bookAbbrev}/${chapterNumber}/`;
            return (
                <li>
                    <a 
                      href={chapterUrl} 
                      class="flex items-center justify-center p-4 h-16 rounded-md bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600 font-medium text-lg transition-colors"
                    >
                        {chapterNumber}
                    </a>
                </li>
            )
        })}
    </ul>
</BaseLayout>